:root{
  --fg:#e6e9ef; --bg:#0b0f14; --card:#111827;
  --accent:#9ddcff; --link:#9ddcff; --muted:#9aa5b1;
  --mono:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
  --sans:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  --ring:#9ddcff;
}
:root.theme-light{
  --fg:#202124; --bg:#f7f7f9; --card:#ffffff;
  --accent:#006fbf; --link:#00509e; --muted:#5f6368;
}
:root.theme-cringe{
  --fg:#e6e9ef; --bg:#101014; --card:#151821;
  --accent:#00f0ff; --link:#00f0ff; --muted:#a8b3bd;
}

/* базовые вещи */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--fg); background:var(--bg);
  font:16px/1.6 var(--sans);
  -webkit-text-size-adjust:100%; text-size-adjust:100%;
  color-scheme: dark;
}
:root.theme-light body{ color-scheme: light; }
a{color:var(--link);text-decoration:none}
a:hover{text-decoration:underline}
.muted{color:var(--muted)}
:focus-visible{outline:2px solid var(--ring); outline-offset:2px}
img,svg,video{max-width:100%; height:auto}

/* шапка: безопасная по умолчанию */
.header{
  display:flex; align-items:center; justify-content:space-between; gap:.75rem;
  padding:.75rem 1rem;
  position:sticky; top:0; z-index:10;
  background:rgba(0,0,0,.65);
  border-bottom:1px solid rgba(255,255,255,.06);
}
/* включаем легкий blur только там, где дёшево и возможно */
@media (min-width: 900px){
  @supports (backdrop-filter: blur(4px)) {
    .header{
      background:linear-gradient(to bottom,rgba(0,0,0,.35),transparent 85%);
      backdrop-filter:saturate(120%) blur(4px);
      -webkit-backdrop-filter:saturate(120%) blur(4px);
    }
  }
}

.logo{color:var(--accent);font-weight:700;letter-spacing:.2px;white-space:nowrap}
.nav a{margin:0 .5rem}
.theme-toggle{
  border:1px solid var(--accent); background:transparent; color:var(--accent);
  border-radius:6px; padding:.25rem .5rem; cursor:pointer;
  -webkit-tap-highlight-color:transparent;
}

/* небесная полоса — полегче */
#sky-line{
  position:fixed; left:0; right:0; top:0; height:4px; z-index:0;
  pointer-events:none; opacity:.85; filter:blur(.25px);
  background:linear-gradient(90deg,#0b3a57,#9ddcff,#0b3a57);
  background-size:200% 100%;
  animation:skyshift 12s linear infinite;
}
@keyframes skyshift{from{background-position:0% 0}to{background-position:100% 0}}
:root.theme-cringe #sky-line{height:6px; animation-duration:8s}
@media (prefers-reduced-motion: reduce){
  #sky-line{animation:none}
}

/* глитч ограничиваем, чтобы не плавить GPU */
:root.theme-cringe h1,
:root.theme-cringe h2{
  text-shadow:0 0 2px rgba(0,240,255,.6),1px -1px 3px rgba(0,240,255,.25);
  animation:glitch 1.4s ease-in-out infinite alternate;
}
@keyframes glitch{
  0%{transform:translate(0,0)} 20%{transform:translate(.5px,-.5px)}
  40%{transform:translate(-.5px,.5px)} 60%{transform:translate(.5px,.5px)}
  80%{transform:translate(-.5px,-.5px)} 100%{transform:translate(0,0)}
}
/* на мобилках и при снижении анимаций — тише */
@media (max-width: 820px), (prefers-reduced-motion: reduce){
  :root.theme-cringe h1, :root.theme-cringe h2{ animation:none }
}

/* карточные контейнеры и медиа (если есть) */
.panel{
  background:var(--card);
  border:1px solid rgba(255,255,255,.06);
  border-radius:14px;
  box-shadow:0 8px 28px rgba(0,0,0,.35);
  padding:16px;
  content-visibility:auto;
  contain-intrinsic-size:200px;
  contain:paint;
}
.comment, .thread, .post{
  content-visibility:auto;
  contain-intrinsic-size:160px;
  contain:paint;
}
.post-media img{content-visibility:auto}

/* мелкие правки типографики */
h1,h2{margin:.25rem 0}
code{font-family:var(--mono); background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); border-radius:6px; padding:.12em .4em}

# Канонар (kainrax/canonar)

Статический сайт с интерактивом. Контент — JSON. Автосборка.

## Локально
```bash
npm ci
npm run dev
```

## Сборка
```bash
npm run build
```

## Деплой на Netlify
- В UI установи **Base directory**: `kainrax/canonar`
- Build command: `npm run build`
- Publish directory: `dist`

## Контент
Добавляй файлы `content/<branch>/<type>/<slug>.meta.json`. Скрипт сам соберёт `public/index.json`.

## Что уже работает после первой сборки
- Списки сущностей по веткам и типам.
- Страница карточки с ползунками и пересчётом Pv, Vσ, S, dose, drift, topo.
- Снимок параметров в URL.
- Лёгкое добавление новых сущностей и веток без правки кода.

## Что добавлять дальше без ломки архитектуры
- Heat-map хроноленты, DAG-граф влияния (минимальный d3-модуль).
- Сценарии simulate/commit/rollback как чисто клиентские симуляции, результаты — diff-панель.
- Тёмный слой и гейты эпох через branchCaps.
- Поиск по контенту: маленький индекс строится в build-index.mjs и грузится на страницу поиска.

Если просто положишь весь проект в kainrax/canonar, это будет работать. Для Netlify задай Base directory на этот подпроект.
